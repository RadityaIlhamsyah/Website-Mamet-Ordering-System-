{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Downloads/warkop-ordering-system%20%284%29/lib/mongodb.ts"],"sourcesContent":["import { MongoClient } from 'mongodb';\n\nconst uri = process.env.MONGODB_URI;\n\nif (!uri) {\n  console.warn('⚠️  MONGODB_URI not found in environment variables.');\n  console.warn('⚠️  Please create a .env.local file with:');\n  console.warn('⚠️  MONGODB_URI=your_mongodb_connection_string');\n  console.warn('⚠️  JWT_SECRET=your_secret_key');\n}\n\nconst options = {};\n\nlet client: MongoClient | null = null;\nlet clientPromise: Promise<MongoClient> | null = null;\n\nif (uri) {\n  if (process.env.NODE_ENV === 'development') {\n    // In development, use a global variable to preserve the client across hot reloads\n    let globalWithMongo = global as typeof globalThis & {\n      _mongoClientPromise?: Promise<MongoClient>;\n    };\n\n    if (!globalWithMongo._mongoClientPromise) {\n      client = new MongoClient(uri, options);\n      globalWithMongo._mongoClientPromise = client.connect();\n    }\n    clientPromise = globalWithMongo._mongoClientPromise;\n  } else {\n    // In production, create a new client\n    client = new MongoClient(uri, options);\n    clientPromise = client.connect();\n  }\n}\n\nexport default clientPromise;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,MAAM,QAAQ,GAAG,CAAC,WAAW;AAEnC,IAAI,CAAC,KAAK;IACR,QAAQ,IAAI,CAAC;IACb,QAAQ,IAAI,CAAC;IACb,QAAQ,IAAI,CAAC;IACb,QAAQ,IAAI,CAAC;AACf;AAEA,MAAM,UAAU,CAAC;AAEjB,IAAI,SAA6B;AACjC,IAAI,gBAA6C;AAEjD,IAAI,KAAK;IACP,wCAA4C;QAC1C,kFAAkF;QAClF,IAAI;QAIJ,IAAI,CAAC,gBAAgB,mBAAmB,EAAE;YACxC,SAAS,IAAI,sHAAW,CAAC,KAAK;YAC9B,gBAAgB,mBAAmB,GAAG,OAAO,OAAO;QACtD;QACA,gBAAgB,gBAAgB,mBAAmB;IACrD;;AAKF;uCAEe"}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Downloads/warkop-ordering-system%20%284%29/lib/data.ts"],"sourcesContent":["import { MenuItem } from \"./types\";\n\nexport const MENU_ITEMS: MenuItem[] = [\n  // Coffee\n  {\n    id: \"c1\",\n    name: \"Kopi Tubruk\",\n    description: \"Traditional unfiltered black coffee, strong and bold.\",\n    price: 8000,\n    category: \"coffee\",\n    image: \"/kopi-tubruk.jpg\",\n    available: true,\n  },\n  {\n    id: \"c2\",\n    name: \"Kopi Susu Gula Aren\",\n    description: \"Iced coffee with milk and palm sugar.\",\n    price: 15000,\n    category: \"coffee\",\n    image: \"/iced-coffee-milk.jpg\",\n    available: true,\n  },\n  {\n    id: \"c3\",\n    name: \"Vietnam Drip\",\n    description: \"Slow-dripped coffee with sweetened condensed milk.\",\n    price: 12000,\n    category: \"coffee\",\n    image: \"/vietnam-drip-coffee.jpg\",\n    available: true,\n  },\n  {\n    id: \"c4\",\n    name: \"Cappuccino\",\n    description: \"Espresso with steamed milk and foam.\",\n    price: 18000,\n    category: \"coffee\",\n    image: \"/frothy-cappuccino.png\",\n    available: true,\n  },\n\n  // Non-Coffee\n  {\n    id: \"n1\",\n    name: \"Es Teh Manis\",\n    description: \"Sweet iced tea, a classic refreshment.\",\n    price: 5000,\n    category: \"non-coffee\",\n    image: \"/iced-tea.png\",\n    available: true,\n  },\n  {\n    id: \"n2\",\n    name: \"Soda Gembira\",\n    description: \"Soda water with condensed milk and syrup.\",\n    price: 12000,\n    category: \"non-coffee\",\n    image: \"/pink-soda-drink.jpg\",\n    available: true,\n  },\n  {\n    id: \"n3\",\n    name: \"Wedang Jahe\",\n    description: \"Hot ginger drink, perfect for warming up.\",\n    price: 10000,\n    category: \"non-coffee\",\n    image: \"/ginger-tea.png\",\n    available: true,\n  },\n\n  // Snacks\n  {\n    id: \"s1\",\n    name: \"Pisang Goreng\",\n    description: \"Fried banana fritters, crispy and sweet.\",\n    price: 10000,\n    category: \"snacks\",\n    image: \"/fried-banana.jpg\",\n    available: true,\n  },\n  {\n    id: \"s2\",\n    name: \"Roti Bakar Coklat Keju\",\n    description: \"Toast with chocolate sprinkles and grated cheese.\",\n    price: 12000,\n    category: \"snacks\",\n    image: \"/toast-chocolate-cheese.jpg\",\n    available: true,\n  },\n  {\n    id: \"s3\",\n    name: \"Mendoan\",\n    description: \"Half-cooked fried tempeh with green chili soy sauce.\",\n    price: 8000,\n    category: \"snacks\",\n    image: \"/tempeh-mendoan.jpg\",\n    available: true,\n  },\n\n  // Meals\n  {\n    id: \"m1\",\n    name: \"Indomie Telur Kornet\",\n    description: \"Indomie noodles with egg and corned beef.\",\n    price: 15000,\n    category: \"meals\",\n    image: \"/indomie-noodles.jpg\",\n    available: true,\n  },\n  {\n    id: \"m2\",\n    name: \"Nasi Goreng Gila\",\n    description: \"Spicy fried rice with sausages, meatballs, and eggs.\",\n    price: 20000,\n    category: \"meals\",\n    image: \"/fried-rice.png\",\n    available: true,\n  },\n];\n\nexport const CATEGORIES = [\n  { id: \"all\", name: \"All\" },\n  { id: \"coffee\", name: \"Coffee\" },\n  { id: \"non-coffee\", name: \"Non-Coffee\" },\n  { id: \"snacks\", name: \"Snacks\" },\n  { id: \"meals\", name: \"Meals\" },\n];\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,aAAyB;IACpC,SAAS;IACT;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,OAAO;QACP,UAAU;QACV,OAAO;QACP,WAAW;IACb;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,OAAO;QACP,UAAU;QACV,OAAO;QACP,WAAW;IACb;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,OAAO;QACP,UAAU;QACV,OAAO;QACP,WAAW;IACb;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,OAAO;QACP,UAAU;QACV,OAAO;QACP,WAAW;IACb;IAEA,aAAa;IACb;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,OAAO;QACP,UAAU;QACV,OAAO;QACP,WAAW;IACb;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,OAAO;QACP,UAAU;QACV,OAAO;QACP,WAAW;IACb;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,OAAO;QACP,UAAU;QACV,OAAO;QACP,WAAW;IACb;IAEA,SAAS;IACT;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,OAAO;QACP,UAAU;QACV,OAAO;QACP,WAAW;IACb;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,OAAO;QACP,UAAU;QACV,OAAO;QACP,WAAW;IACb;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,OAAO;QACP,UAAU;QACV,OAAO;QACP,WAAW;IACb;IAEA,QAAQ;IACR;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,OAAO;QACP,UAAU;QACV,OAAO;QACP,WAAW;IACb;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,OAAO;QACP,UAAU;QACV,OAAO;QACP,WAAW;IACb;CACD;AAEM,MAAM,aAAa;IACxB;QAAE,IAAI;QAAO,MAAM;IAAM;IACzB;QAAE,IAAI;QAAU,MAAM;IAAS;IAC/B;QAAE,IAAI;QAAc,MAAM;IAAa;IACvC;QAAE,IAAI;QAAU,MAAM;IAAS;IAC/B;QAAE,IAAI;QAAS,MAAM;IAAQ;CAC9B"}},
    {"offset": {"line": 237, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Downloads/warkop-ordering-system%20%284%29/lib/db-utils.ts"],"sourcesContent":["import clientPromise from \"./mongodb\"\nimport type { MenuItemDoc, OrderDoc, AdminDoc, SettingsDoc } from \"./models\"\nimport { MENU_ITEMS } from \"./data\"\nimport { ObjectId } from \"mongodb\"\n\nexport async function isDatabaseAvailable(): Promise<boolean> {\n  return clientPromise !== null\n}\n\nexport async function getDatabase() {\n  if (!clientPromise) {\n    return null\n  }\n  try {\n    const client = await clientPromise\n    return client.db(\"warkop\")\n  } catch (e) {\n    console.error(\"Failed to connect to database:\", e)\n    return null\n  }\n}\n\n// Menu Items\nexport async function getMenuItems(): Promise<MenuItemDoc[]> {\n  const db = await getDatabase()\n  if (!db) {\n    console.warn(\"[v0] Database not available, serving mock menu items\")\n    return MENU_ITEMS.map((item) => ({\n      ...item,\n      _id: new ObjectId(item.id), // Mock ObjectId\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    })) as unknown as MenuItemDoc[]\n  }\n\n  const items = await db.collection<MenuItemDoc>(\"menuItems\").find({}).toArray()\n  if (items.length === 0) {\n    return MENU_ITEMS.map((item) => ({\n      ...item,\n      _id: new ObjectId(item.id),\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    })) as unknown as MenuItemDoc[]\n  }\n\n  return items\n}\n\nexport async function seedMenuItems() {\n  const db = await getDatabase()\n  if (!db) return // Skip seeding if no DB\n\n  const count = await db.collection(\"menuItems\").countDocuments()\n\n  if (count === 0) {\n    const items = MENU_ITEMS.map((item) => ({\n      ...item,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    }))\n    await db.collection(\"menuItems\").insertMany(items)\n    console.log(\"[v0] Seeded menu items\")\n  }\n}\n\nexport async function updateMenuItemAvailability(id: string, available: boolean) {\n  const db = await getDatabase()\n  if (!db) return // Skip update if no DB\n\n  await db.collection(\"menuItems\").updateOne({ id }, { $set: { available, updatedAt: new Date() } })\n}\n\nexport async function createMenuItem(itemData: Omit<MenuItemDoc, \"_id\" | \"createdAt\" | \"updatedAt\">) {\n  const db = await getDatabase()\n  if (!db) throw new Error(\"Database not available\")\n\n  const result = await db.collection(\"menuItems\").insertOne({\n    ...itemData,\n    createdAt: new Date(),\n    updatedAt: new Date(),\n  })\n  return result.insertedId.toString()\n}\n\nexport async function updateMenuItem(id: string, itemData: Partial<MenuItemDoc>) {\n  const db = await getDatabase()\n  if (!db) throw new Error(\"Database not available\")\n\n  await db.collection(\"menuItems\").updateOne({ id }, { $set: { ...itemData, updatedAt: new Date() } })\n}\n\nexport async function deleteMenuItem(id: string) {\n  const db = await getDatabase()\n  if (!db) throw new Error(\"Database not available\")\n\n  await db.collection(\"menuItems\").deleteOne({ id })\n}\n\n// Orders\nexport async function createOrder(orderData: Omit<OrderDoc, \"_id\" | \"createdAt\" | \"updatedAt\">) {\n  const db = await getDatabase()\n  if (!db) return // Skip creation if no DB\n\n  const result = await db.collection(\"orders\").insertOne({\n    ...orderData,\n    createdAt: new Date(),\n    updatedAt: new Date(),\n  })\n  return result.insertedId.toString()\n}\n\nexport async function getOrders(): Promise<OrderDoc[]> {\n  const db = await getDatabase()\n  if (!db) {\n    console.warn(\"[v0] Database not available, serving mock orders\")\n    return []\n  }\n\n  const orders = await db.collection<OrderDoc>(\"orders\").find({}).sort({ createdAt: -1 }).toArray()\n  return orders\n}\n\nexport async function getOrderByCode(orderCode: string): Promise<OrderDoc | null> {\n  const db = await getDatabase()\n  if (!db) {\n    console.warn(\"[v0] Database not available, serving mock order\")\n    return null\n  }\n\n  const order = await db.collection<OrderDoc>(\"orders\").findOne({ orderCode })\n  return order\n}\n\nexport async function updateOrderStatus(orderCode: string, status: OrderDoc[\"status\"]) {\n  const db = await getDatabase()\n  if (!db) return // Skip update if no DB\n\n  await db.collection(\"orders\").updateOne({ orderCode }, { $set: { status, updatedAt: new Date() } })\n}\n\nexport async function getOrdersByDateRange(startDate: Date, endDate: Date): Promise<OrderDoc[]> {\n  const db = await getDatabase()\n  if (!db) {\n    console.warn(\"[v0] Database not available, serving empty orders\")\n    return []\n  }\n\n  const orders = await db\n    .collection<OrderDoc>(\"orders\")\n    .find({\n      createdAt: { $gte: startDate, $lte: endDate },\n    })\n    .sort({ createdAt: -1 })\n    .toArray()\n  return orders\n}\n\nexport async function getDailyRevenue(date: Date): Promise<OrderDoc[]> {\n  const startDate = new Date(date)\n  startDate.setHours(0, 0, 0, 0)\n  const endDate = new Date(date)\n  endDate.setHours(23, 59, 59, 999)\n  return getOrdersByDateRange(startDate, endDate)\n}\n\nexport async function getWeeklyRevenue(date: Date): Promise<OrderDoc[]> {\n  const startDate = new Date(date)\n  startDate.setDate(date.getDate() - date.getDay())\n  startDate.setHours(0, 0, 0, 0)\n  const endDate = new Date(startDate)\n  endDate.setDate(startDate.getDate() + 6)\n  endDate.setHours(23, 59, 59, 999)\n  return getOrdersByDateRange(startDate, endDate)\n}\n\nexport async function getMonthlyRevenue(year: number, month: number): Promise<OrderDoc[]> {\n  const startDate = new Date(year, month, 1)\n  const endDate = new Date(year, month + 1, 0)\n  endDate.setHours(23, 59, 59, 999)\n  return getOrdersByDateRange(startDate, endDate)\n}\n\n// Admin\nexport async function getAdminByUsername(username: string): Promise<AdminDoc | null> {\n  const db = await getDatabase()\n  if (!db) {\n    console.warn(\"[v0] Database not available, serving mock admin\")\n    return null\n  }\n\n  const admin = await db.collection<AdminDoc>(\"admins\").findOne({ username })\n  return admin\n}\n\nexport async function createDefaultAdmin() {\n  const db = await getDatabase()\n  if (!db) return // Skip creation if no DB\n\n  const count = await db.collection(\"admins\").countDocuments()\n\n  if (count === 0) {\n    // Default admin credentials\n    // In production, you should hash the password properly\n    const bcrypt = require(\"bcryptjs\")\n    const hashedPassword = await bcrypt.hash(\"admin123\", 10)\n\n    await db.collection(\"admins\").insertOne({\n      username: \"admin\",\n      password: hashedPassword,\n      email: \"admin@warkop.com\",\n      createdAt: new Date(),\n    })\n    console.log(\"[v0] Created default admin user\")\n  }\n}\n\n// Settings\nexport async function getSettings(): Promise<SettingsDoc | null> {\n  const db = await getDatabase()\n  if (!db) {\n    console.warn(\"[v0] Database not available, serving mock settings\")\n    return {\n      storeName: \"Warkop Kita\",\n      storeAddress: \"Jl. Sudirman No. 123, Jakarta\",\n      storePhone: \"+62 812-3456-7890\",\n      openingHours: \"07:00 - 22:00\",\n      updatedAt: new Date(),\n    }\n  }\n\n  const settings = await db.collection<SettingsDoc>(\"settings\").findOne({})\n  return settings\n}\n\nexport async function updateSettings(data: Partial<SettingsDoc>) {\n  const db = await getDatabase()\n  if (!db) return // Skip update if no DB\n\n  await db.collection(\"settings\").updateOne({}, { $set: { ...data, updatedAt: new Date() } }, { upsert: true })\n}\n\nexport async function seedDefaultSettings() {\n  const db = await getDatabase()\n  if (!db) return // Skip seeding if no DB\n\n  const count = await db.collection(\"settings\").countDocuments()\n\n  if (count === 0) {\n    await db.collection(\"settings\").insertOne({\n      storeName: \"Warkop Kita\",\n      storeAddress: \"Jl. Sudirman No. 123, Jakarta\",\n      storePhone: \"+62 812-3456-7890\",\n      openingHours: \"07:00 - 22:00\",\n      updatedAt: new Date(),\n    })\n    console.log(\"[v0] Seeded default settings\")\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 536, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Downloads/warkop-ordering-system%20%284%29/lib/auth.ts"],"sourcesContent":["import { SignJWT, jwtVerify } from 'jose';\nimport { cookies } from 'next/headers';\n\nconst JWT_SECRET = process.env.JWT_SECRET || 'your-secret-key-change-in-production';\nconst secret = new TextEncoder().encode(JWT_SECRET);\n\nexport interface SessionPayload {\n  username: string;\n  email: string;\n  expiresAt: Date;\n}\n\nexport async function createSession(username: string, email: string) {\n  const expiresAt = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000); // 7 days\n  \n  const token = await new SignJWT({ username, email })\n    .setProtectedHeader({ alg: 'HS256' })\n    .setIssuedAt()\n    .setExpirationTime('7d')\n    .sign(secret);\n\n  const cookieStore = await cookies();\n  cookieStore.set('session', token, {\n    httpOnly: true,\n    secure: process.env.NODE_ENV === 'production',\n    expires: expiresAt,\n    sameSite: 'lax',\n    path: '/',\n  });\n\n  return token;\n}\n\nexport async function verifySession(): Promise<SessionPayload | null> {\n  const cookieStore = await cookies();\n  const token = cookieStore.get('session')?.value;\n\n  if (!token) {\n    return null;\n  }\n\n  try {\n    const verified = await jwtVerify(token, secret);\n    return {\n      username: verified.payload.username as string,\n      email: verified.payload.email as string,\n      expiresAt: new Date((verified.payload.exp || 0) * 1000),\n    };\n  } catch (error) {\n    console.error('[v0] Session verification failed:', error);\n    return null;\n  }\n}\n\nexport async function deleteSession() {\n  const cookieStore = await cookies();\n  cookieStore.delete('session');\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;;;AAEA,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU,IAAI;AAC7C,MAAM,SAAS,IAAI,cAAc,MAAM,CAAC;AAQjC,eAAe,cAAc,QAAgB,EAAE,KAAa;IACjE,MAAM,YAAY,IAAI,KAAK,KAAK,GAAG,KAAK,IAAI,KAAK,KAAK,KAAK,OAAO,SAAS;IAE3E,MAAM,QAAQ,MAAM,IAAI,kKAAO,CAAC;QAAE;QAAU;IAAM,GAC/C,kBAAkB,CAAC;QAAE,KAAK;IAAQ,GAClC,WAAW,GACX,iBAAiB,CAAC,MAClB,IAAI,CAAC;IAER,MAAM,cAAc,MAAM,IAAA,4IAAO;IACjC,YAAY,GAAG,CAAC,WAAW,OAAO;QAChC,UAAU;QACV,QAAQ,oDAAyB;QACjC,SAAS;QACT,UAAU;QACV,MAAM;IACR;IAEA,OAAO;AACT;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,4IAAO;IACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,YAAY;IAE1C,IAAI,CAAC,OAAO;QACV,OAAO;IACT;IAEA,IAAI;QACF,MAAM,WAAW,MAAM,IAAA,sKAAS,EAAC,OAAO;QACxC,OAAO;YACL,UAAU,SAAS,OAAO,CAAC,QAAQ;YACnC,OAAO,SAAS,OAAO,CAAC,KAAK;YAC7B,WAAW,IAAI,KAAK,CAAC,SAAS,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI;QACpD;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qCAAqC;QACnD,OAAO;IACT;AACF;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,4IAAO;IACjC,YAAY,MAAM,CAAC;AACrB"}},
    {"offset": {"line": 595, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Downloads/warkop-ordering-system%20%284%29/app/api/admin/orders/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { getOrders, updateOrderStatus } from '@/lib/db-utils';\nimport { verifySession } from '@/lib/auth';\n\nexport async function GET() {\n  try {\n    const session = await verifySession();\n    if (!session) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\n    }\n\n    const orders = await getOrders();\n    return NextResponse.json(orders);\n  } catch (error) {\n    console.error('[v0] Get admin orders error:', error);\n    return NextResponse.json(\n      { error: 'Failed to fetch orders' },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function PATCH(request: Request) {\n  try {\n    const session = await verifySession();\n    if (!session) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\n    }\n\n    const { orderCode, status } = await request.json();\n    \n    if (!orderCode || !status) {\n      return NextResponse.json(\n        { error: 'Missing required fields' },\n        { status: 400 }\n      );\n    }\n\n    await updateOrderStatus(orderCode, status);\n    return NextResponse.json({ success: true });\n  } catch (error) {\n    console.error('[v0] Update order status error:', error);\n    return NextResponse.json(\n      { error: 'Failed to update order' },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,UAAU,MAAM,IAAA,8HAAa;QACnC,IAAI,CAAC,SAAS;YACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QAEA,MAAM,SAAS,MAAM,IAAA,iIAAS;QAC9B,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAyB,GAClC;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,MAAM,OAAgB;IAC1C,IAAI;QACF,MAAM,UAAU,MAAM,IAAA,8HAAa;QACnC,IAAI,CAAC,SAAS;YACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QAEA,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEhD,IAAI,CAAC,aAAa,CAAC,QAAQ;YACzB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA0B,GACnC;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,IAAA,yIAAiB,EAAC,WAAW;QACnC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAK;IAC3C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mCAAmC;QACjD,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAyB,GAClC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}